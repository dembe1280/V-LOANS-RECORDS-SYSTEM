<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Student Loan Records</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  padding: 20px;
}
h1 {
  text-align: center;
  color: #003366;
}
.container {
  max-width: 1000px;
  margin: auto;
  background: white;
  padding: 20px;
  border-radius: 10px;
}
input, select, button {
  padding: 8px;
  margin: 5px;
}
button {
  cursor: pointer;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
}
th, td {
  border: 1px solid #ccc;
  padding: 8px;
  text-align: center;
}
th {
  background: #003366;
  color: white;
}
.paid {
  background: #c8f7c5;
}
.unpaid {
  background: #f7c5c5;
}
</style>
</head>

<body>

<div class="container">
  <h1>Student Loan Records</h1>

  <!-- FORM -->
  <input id="name" placeholder="Student Name">
  <input id="amount" type="number" placeholder="Loan Amount">
  <select id="period">
    <option>7</option>
    <option>14</option>
    <option>30</option>
  </select>
  <select id="gadget">
    <option>Laptop</option>
    <option>Smartphone</option>
    <option>Tablet</option>
    <option>Gaming Console</option>
  </select>

  <button onclick="addRecord()">Add Record</button>

  <!-- TABLE -->
  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Name</th>
        <th>Amount</th>
        <th>Interest</th>
        <th>Repayment</th>
        <th>Period</th>
        <th>Gadget</th>
        <th>Status</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>
</div>

<script>
let records = JSON.parse(localStorage.getItem("loanRecords")) || [];

function save() {
  localStorage.setItem("loanRecords", JSON.stringify(records));
}

function addRecord() {
  let name = document.getElementById("name").value;
  let amount = Number(document.getElementById("amount").value);
  let period = document.getElementById("period").value;
  let gadget = document.getElementById("gadget").value;

  if (!name || amount < 100 || amount > 5000) {
    alert("Enter valid details");
    return;
  }

  let repayment = (amount * 1.3).toFixed(2);

  records.push({
    date: new Date().toLocaleDateString(),
    name,
    amount,
    interest: "30%",
    repayment,
    period,
    gadget,
    status: "Not Paid"
  });

  save();
  render();
  clearInputs();
}

function render() {
  let body = document.getElementById("tableBody");
  body.innerHTML = "";

  records.forEach((r, i) => {
    body.innerHTML += `
      <tr class="${r.status === 'Paid' ? 'paid' : 'unpaid'}">
        <td>${r.date}</td>
        <td>${r.name}</td>
        <td>R${r.amount}</td>
        <td>${r.interest}</td>
        <td>R${r.repayment}</td>
        <td>${r.period} days</td>
        <td>${r.gadget}</td>
        <td>${r.status}</td>
        <td>
          <button onclick="toggleStatus(${i})">Paid</button>
          <button onclick="removeRecord(${i})">Delete</button>
        </td>
      </tr>`;
  });
}

function toggleStatus(i) {
  records[i].status = records[i].status === "Paid" ? "Not Paid" : "Paid";
  save();
  render();
}

function removeRecord(i) {
  if (confirm("Delete this record?")) {
    records.splice(i, 1);
    save();
    render();
  }
}

function clearInputs() {
  document.getElementById("name").value = "";
  document.getElementById("amount").value = "";
}

render();
</script>

</body>
</html>
